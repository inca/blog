<!DOCTYPE html><html lang="en"><head><title>Substance Designer: fixing Pixel Processor precision/depth · Boris Okunskiy</title><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400i,700,700i&amp;display=optional"><link rel="stylesheet" href="/build/index.css"><link rel="shortcut icon" href="/favicon.ico"><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="theme-color" content="#dd3c49"><meta name="apple-mobile-web-app-status-bar-style" content="#dd3c49"></head><body><div class="header"><div class="header__container container"><div class="topnav"><div class="topnav__logo"><a class="logo topnav__link" href="/" title="Boris Okunskiy"><svg class="icon-bo" viewBox="0 0 64 64"><defs><linearGradient id="gradRed" gradientTransform="rotate(30)"><stop offset="0%" stop-color="hsl(355deg, 70%, 85%)"></stop><stop offset="100%" stop-color="hsl(355deg, 70%, 55%)"></stop></linearGradient><linearGradient id="gradMagenta" gradientTransform="rotate(30)"><stop offset="0%" stop-color="hsl(320deg, 50%, 85%)"></stop><stop offset="100%" stop-color="hsl(320deg, 50%, 60%)"></stop></linearGradient></defs><g transform="scale(1, .9)" transform-origin="center"><g transform="matrix(1.83333,0,0,2.33333,-13,-21.6667)"><circle fill="url(#gradMagenta)" cx="30" cy="23" r="12"></circle></g><g transform="matrix(0.875,0,0,0.875,10,4)"><path fill="url(#gradRed)" d="M-11.429,0L11.429,0C20.259,0 27.429,7.169 27.429,16C27.429,24.831 20.259,32 11.429,32C20.259,32 27.429,39.169 27.429,48C27.429,56.831 20.259,64 11.429,64L-11.429,64L-11.429,0Z"></path></g></g></svg><span class="logo__name" data-name="Boris"></span><span class="logo__dot logo__particle"></span><span class="logo__name" data-name="Okunskiy"></span></a></div><div class="topnav__icons"><a class="topnav__icon" href="https://twitter.com/boris_okunskiy" title="Boris on Twitter"><svg class="icon-twitter" viewBox="0 0 128 128"><g transform="matrix(1.12952,0,0,1.12952,-5.77298,-6.08744)"><path d="M106.3,36.6C103.5,37.9 100.3,38.7 97.3,39.2C98.8,39 100.9,36.3 101.8,35.3C103.1,33.7 104.2,31.8 104.8,29.8C104.9,29.6 104.9,29.4 104.8,29.3C104.6,29.2 104.5,29.3 104.3,29.3C100.9,31.1 97.4,32.5 93.6,33.4C93.3,33.5 93.1,33.4 92.9,33.2C92.6,32.8 92.3,32.5 92,32.2C90.4,30.9 88.7,29.8 86.8,29C84.3,28 81.5,27.5 78.8,27.7C76.2,27.9 73.6,28.6 71.3,29.8C69,31 66.9,32.7 65.2,34.8C63.5,36.9 62.2,39.4 61.6,42.1C61,44.7 61,47.2 61.4,49.8C61.5,50.2 61.4,50.3 61,50.2C46.2,48.1 34,42.9 24.1,31.6C23.7,31.1 23.4,31.1 23.1,31.6C18.8,38.1 20.9,48.5 26.3,53.7C27,54.4 27.8,55.1 28.6,55.7C28.3,55.8 24.7,55.4 21.5,53.7C21.1,53.4 20.9,53.6 20.8,54.1C20.8,54.8 20.8,55.4 20.9,56.2C21.7,62.8 26.3,68.9 32.5,71.2C33.2,71.5 34.1,71.8 34.9,71.9C33.5,72.2 32,72.4 27.9,72.1C27.4,72 27.2,72.3 27.4,72.7C30.4,81.1 37,83.6 42,85C42.7,85.1 43.3,85.1 44,85.3C44,85.4 43.9,85.4 43.9,85.4C42.3,87.9 36.6,89.8 33.9,90.7C29.1,92.4 23.8,93.1 18.7,92.6C17.9,92.5 17.7,92.5 17.5,92.6C17.3,92.7 17.5,92.9 17.7,93.1C18.7,93.8 19.8,94.4 20.9,95C24.1,96.7 27.5,98.1 31,99.1C49.2,104.1 69.8,100.4 83.5,86.8C94.2,76.2 98,61.5 98,46.7C98,46.1 98.7,45.8 99.1,45.5C101.9,43.4 104.1,40.9 106.2,38.1C106.7,37.5 106.6,36.9 106.6,36.7L106.6,36.6C106.6,36.4 106.7,36.4 106.3,36.6Z"></path></g></svg></a><a class="topnav__icon" href="https://github.com/inca" title="Boris on GitHub"><svg class="icon-gh" viewBox="0 0 128 128"><g transform="matrix(3.78734,0,0,3.78734,63.9943,124.66)"><path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904"></path></g></svg></a></div></div></div></div><div class="content"><div class="content__container container"><article class="post" data-post-id="drafts/substance-pixel-processor-precision"><header class="post__header"><div class="post__cal cal" title="May 12, 2020 12:00 AM"><div class="cal__day">12</div><div class="cal__sub"><div class="cal__month">May</div><div class="cal__year">20</div></div></div><h1 class="post__title">Substance Designer: fixing Pixel Processor precision/depth</h1><div class="post__tagline"><a class="post-tag" href="/posts?tag=Substance Designer">Substance Designer</a><a class="post-tag" href="/posts?tag=Pixel Processor">Pixel Processor</a><a class="post-tag" href="/posts?tag=Shaders">Shaders</a></div></header><div class="post__content"><p class="tldr">Pixel Processors by default have 8 bit precision. If you’re creating a grayscale map, you’d need to override “Output Format” and switch it to 16 bit-per-channel.</p>
<p>Here’s a quick SD tip (just in case you didn’t know): you can use Pixel Processor to quickly prototype your shaders.</p>
<p class="sidenote">Be sure to check out the amazing <a href="https://thebookofshaders.com/">Book of Shaders</a> which can boost your procedural creativity to whole new levels!</p>
<p>There’s just one tiny problem you may run into.</p>
<p>To demonstrate, let’s create a very basic paraboloid shape.</p>
<figure class="centered"><p><img src="/img/posts/sd/pixproc-paraboloid-init.jpg" loading="lazy"/></p>
<figcaption>Pixel Processor graph for paraboloid shape.</figcaption></figure>
<p>Details: I’ve used a <a href="https://en.wikipedia.org/wiki/Dot_product">dot product</a> of a position vector with itself, which is a very popular (and fast) technique of obtainining a “squared distance field”. It works because dot product yields %%x^2 + y^2%% which is known to be an <a href="https://en.wikipedia.org/wiki/Circle#Equations">equation of circle</a>, with radius squared.</p>
<p>So far so good, but try plugging this to your Normal Map node and you’ll see this:</p>
<figure class="centered"><p><img src="/img/posts/sd/pixproc-paraboloid-normal-bad.jpg" loading="lazy"/></p>
<figcaption>Normal Map created from the Pixel Processor output is jagged and seems to be lacking in precision.</figcaption></figure>
<p>Yeah, this normal map is pretty much broken. Compare it to the standard paraboloid shape:</p>
<figure class="centered"><p><img src="/img/posts/sd/pixproc-paraboloid-normal-good.jpg" loading="lazy"/></p>
<figcaption>Standard paraboloid produced by Shape node produces a correct normal map.</figcaption></figure>
<p>The answer is of course simple: Pixel Processor has lower depth by default (8 bit). In fact it has been shown on all the screenshots (<code>8bpc</code> on output preview, <code>L8</code> in nodes viewer) — but if you’re anything like me you wouldn’t really pay attention to all these “unimportant details”. Well, not until they become important, right? :)</p>
<p>Ok, so the fix is actually pretty simple: just select Pixel Processor node, locate Output Format in Properties, switch Inheritance (that tiny blue/white icon) to “Absolute” and select 16 Bits per Channel.</p>
<figure class="centered"><p><img src="/img/posts/sd/pixproc-change-output-depth.jpg" loading="lazy"/></p>
<figcaption>Switching Pixel Processor Output Format to 16 bits.</figcaption></figure>
<p>Awesome! Now you can forget about precision problems and focus on creating some amazing shapes. Here’s a little teaser for you:</p>
<figure class="centered"><p><img src="/img/posts/sd/pixproc-shape-tweak.gif" loading="lazy"/></p>
<figcaption><a href="https://en.wikipedia.org/wiki/Rose_(mathematics">Polar rose</a> shapes with different parameters.</figcaption></figure>
<p>And that’s it. Hope this little tip helps you create some amazing procedural art. 💜</p>
</div></article></div></div><div class="footer"><div class="footer__container container"></div></div><script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer src="/lib/highlight.pack.js"></script><script defer src="/build/main.js"></script><script defer src="/build/dev.js"></script></body></html>